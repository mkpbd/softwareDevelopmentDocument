

 ## Client Tools 
• Categories of developer tools
• Using MongoDB Shell (mongosh)
• Using MongoDB CLI (mongocli)
• Using MongoDB Compass
• Using the MongoDB for VS Code

[Download MongoDB Community Server | MongoDB](https://www.mongodb.com/try/download/community)

[Try MongoDB Atlas Products | MongoDB](https://www.mongodb.com/try)
[Install mongosh - MongoDB Shell](https://www.mongodb.com/docs/mongodb-shell/install/#std-label-mdb-shell-install)
[What is MongoDB Compass? - MongoDB Compass](https://www.mongodb.com/docs/compass/current/)



A document database has information retrieved or stored in the form of a document or other words semi-structured database. Since they are non-relational, so they are often referred to as NoSQL data. 

The document database fetches and accumulates data in forms of key-value pairs but here, the values are called as Documents. A document can be stated as a complex data structure. Document here can be a form of text, arrays, strings, JSON, XML, or any such format. The use of nested documents is also very common. It is very effective as most of the data created is usually in the form of JSON and is unstructured.

![[Pasted image 20240512154735.png]]
![[Pasted image 20240512154824.png]]

![[Pasted image 20240512154844.png]]

## Working of MongoDB –

![[Pasted image 20240512154924.jpg]]

# MongoDB: Getting Started
**Terminologies**:   
A MongoDB **Database** can be called as the container for all the collections. 

- **Collection** is a bunch of MongoDB documents. It is similar to tables in RDBMS.
- **Document** is made of fields. It is similar to a tuple in RDBMS, but it has dynamic schema here. Documents of the same collection need not have the same set of fields

**Getting Started**

mongo: The Command Line Interface to interact with the db.
mongod: This is the database. Sets up the server.
mongodump: It dumps out the Binary of the Database(BSON)
mongoexport: Exports the document to Json, CSV format
mongoimport: To import some data into the DB.
mongorestore: to restore anything that you’ve exported.
mongostat: Statistics of databases

# What is MongoDB – Working and Features

![[Pasted image 20240512155156.jpg]]



## Database

Database is a physical container for collections. Each database gets its own set of files on the file system. A single MongoDB server typically has multiple databases.

## Collection

Collection is a group of MongoDB documents. It is the equivalent of an RDBMS table. A collection exists within a single database. Collections do not enforce a schema. Documents within a collection can have different fields. Typically, all documents in a collection are of similar or related purpose.

## Document

A document is a set of key-value pairs. Documents have dynamic schema. Dynamic schema means that documents in the same collection do not need to have the same set of fields or structure, and common fields in a collection's documents may hold different types of data.

The following table shows the relationship of RDBMS terminology with MongoDB.

| RDBMS                      | MongoDB                                                  |
| -------------------------- | -------------------------------------------------------- |
| Database                   | Database                                                 |
| Table                      | Collection                                               |
| Tuple/Row /rocod           | Document                                                 |
| column                     | Fields or key/value pairs                                |
| Table Join                 | Embedded Documents                                       |
| Primary Key                | Primary Key (Default key _id provided by MongoDB itself) |
| Database Server and Client |                                                          |
| mysqld/Oracle              | mongod                                                   |
| mysql/sqlplus              | mongo                                                    |
| ACID transactions          | ACID transactions                                        |
| Secondary index            | Secondary index                                          |
| JOINs                      | Embedded document, $lookup                               |
| GROUP BY                   | Aggregation pipeline                                     |
|                            |                                                          |


## Data Types in MongoDB



| Type        | Description                                                                                                                                              |
| ----------- | -------------------------------------------------------------------------------------------------------------------------------------------------------- |
| String      | Strings are UTF-8                                                                                                                                        |
| Integer     | Can be 32-bit or 64-bit                                                                                                                                  |
| Double      | To store floating-point values                                                                                                                           |
| Arrays      | To store a list of values into one key                                                                                                                   |
| Timestamps  | For MongoDB internal use; values are 64-bit<br>Record when a document has been modified or added                                                         |
| Date        | A 64-bit integer that represents the number of milliseconds since<br>the Unix epoch (January 1, 1970)                                                    |
| ObjectId    | Small, unique, fast to generate, and ordered<br>Consist of 12 bytes, where the first four bytes are a timestamp that<br>reflects the ObjectId’s creation |
| Binary data | To store binary data (images, binaries, etc.)                                                                                                            |
| Null        | To store NULL value                                                                                                                                      |

[BSON Types - MongoDB Manual v7.0](https://www.mongodb.com/docs/manual/reference/bson-types/)


## Working with Database Commands

#### Create Database

`use <database name>`
To create a database named mydb, use this command:
`use mydb`

#### Drop Database

`db.dropDatabase()`
Note If no database is selected, the default database test is dropped.

#### Display List of Databases
```shell
show dbs
show databases
```
Note The newly created database mydb is not shown in the list.
This is because the database needs to have at least one collection to
display in the list. The default database is test.

#### Display the Version of MongoDB
`db.version()`
### Display a List of Commands
`db.help()`


## MongoDB CRUD Operations

#### Create a Collection
`db.createCollection (<name>)`

```shell
db.createCollection("person")
```

#### Display Collection 
```shell
show collections
```

#### Insert Documents

| db.collection.insertOne  | Inserts a single document                       |
| ------------------------ | ----------------------------------------------- |
| db.collection.insertMany | Inserts multiple documents                      |
| db.collection.insert     | Inserts a single document or multiple documents |
#### Step 1: Insert a Single Document
```shell
db.person.insertOne({_id:1001,name:"Taanushree AS",age:10})
```

insertOne() returns a document that contains the newly inserted document’s _id.
If you don’t specify an _id field, MongoDB generates an _id field with
an ObjectId value. The _id field act as the primary key.

#### Step 2: Insert Multiple Documents
```shell
db.person.insertMany([{_id:1003,name:"Anba V M",age:16},{_id:10
04,name:"shobana",age:44}])
```

#### Read Operations
Read operations allow us to retrieve documents from a collection.
MongoDB provides the find() method to query documents.
The syntax for the find() command is

`db.collection.find()`

#### Query Documents
##### Step 1: Select All Documents in a collection
```shell
db.person.find({})
```

##### Step 2: Specify Equality Conditions
To specify an equality condition, you need to use `<field>:<value>`
expressions in the query to filter documents.

```shell
db.person.find({name:"shobana"})
```
##### Step 3: Specify Conditions Using Query Operator
To select all documents from the collection person where age is greater
than 10, here is the command:
```sehll
db.person.find({age:{$gt:10}})
```

##### Step 4: Specify AND Conditions
In a compound query, you can specify conditions for more than one field.
To select all documents in the person collection where the name equals
```shell
db.person.find({ name:"shobana",age:{$gt:10}})
```
##### Step 5: Specify OR Conditions
You can use $or in a compound query to join each clause with a logical or conjunction.
The operator $or selects the documents from the collection that match
at least one of the selected conditions.
To select all documents in the person collection where the name equals "shobana" or age equals 20, here is the command:

```shell
db.person.find( { $or: [ { name: "shobana" }, { age: { $eq: 20
} } ] } )
```

### Update Operations
Update operations allow us to modify existing documents in a collection.
MongoDB provides the update methods listed


| db.collection.updateOne<br><br> | To modify a single document                                                         |
| ------------------------------- | ----------------------------------------------------------------------------------- |
| db.collection.updateMany        | To modify multiple documents                                                        |
| db.collection.replaceOne        | To replace the first matching document in the<br>collection that matches the filter |
|                                 |                                                                                     |
```shell
db.collection.updateOne()
db.collection.updateMany()
db.collection.replaceOne()
```

##### Step 1: Update a Single Document
MongoDB provides modify operators to modify field values such as `$set`.
To use the update operators, pass to the update methods an update

```js
{
<update operator>: { <field1>: <value1>, ... },
<update operator>: { <field2>: <value2>, ... },
...
}
```

```js
db.student.updateOne({name: "Joshi"},{$set:{"marks.english": 20}})
```

Note You cannot update the _id field.


##### Step 2: Update Multiple Documents
```js
db.student.updateMany( { "result":"fail" }, { $set: { "marks.
english": 20, marks.maths: 20 } })
```

##### Step 3: Replace a Document
You can replace the entire content of a document except the _id field
by passing an entirely new document as the second argument to db.
collection.replaceOne() as shown here.
Execute the following command to replace the first document from the
student collection where name equals "John".

```json
db.student.replaceOne( { name: "John" }, {_id:1001,name:"John",
marks:{english:36,maths:39},result:"pass"})
```

Note Do not include update operators in the replacement
document. You can omit the _id field in the replacement document
because the _id field is immutable. However, if you want to include
the _id field, use the same value as the current value.


#### Delete Operations
Delete operations allow us to delete documents from a collection.


| db.collection.deleteOne <br> | To delete a single document  |
| ---------------------------- | ---------------------------- |
| db.collection.updateMany     | To delete multiple documents |

```json
db.collection.deleteOne()
db.collection.deleteMany()
```

##### Step 1: Delete Only One Document That Matchesa Condition

```json
db.student.deleteOne({name: "John"})
```
##### Step 2: Delete All Documents That Match a Condition
```json
db.student.deleteMany({name: "Jack"})
```

