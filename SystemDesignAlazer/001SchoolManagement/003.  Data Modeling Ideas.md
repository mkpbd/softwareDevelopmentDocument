
Here's a breakdown of the thought process to generate the data model:

1.  **Understand the Goal:** The user wants a data model for a School Management System based on a provided list of modules. The model needs to be explained.

2.  **Initial  Modules and Core Entities:**
    *   Student Information -> `Students`
    *   Attendance -> `Attendance` (links to `Students`, `Staff`)
    *   Timetable -> `Classes`, `Subjects`, `Teachers`, `TimeSlots`, `Schedules` (or `TimetableEntries`)
    *   Academic -> `Courses` (could be same as `Subjects`), `Assignments`, `Grades`, `ReportCards`
    *   Examination -> `Exams`, `ExamSchedules`, `ExamResults`
    *   Fee Management -> `FeeStructures`, `FeePayments`, `Invoices`
    *   Staff Management -> `Staff` (or `Teachers` as a type of `Staff`), `Payroll`, `PerformanceReviews`
    *   Library -> `Books`, `BookIssues` (or `Borrows`), `Fines`
    *   Transport -> `Buses`, `Routes`, `StudentTransportAllocations`
    *   Communication -> `Announcements`, `Messages`
    *   Parent Portal -> This is more of a view/interface, not a core data entity itself. It accesses data from other tables.
    *   Inventory -> `InventoryItems`, `ItemCategories`
    *   Event/Calendar -> `Events`
    *   Hostel -> `HostelRooms`, `HostelAllocations`
    *   Reports/Analytics -> Again, derived from existing data.
    *   User Role Management -> `Users`, `Roles`, `Permissions`, `UserRoles` (join table)

3.  **Identify Core Entities and Their Primary Attributes:**

    *   **`Users`**: This is fundamental for login and role management.
        *   `UserID` (PK)
        *   `Username`
        *   `PasswordHash`
        *   `Email`
        *   `UserType` (e.g., 'Student', 'Parent', 'Teacher', 'Admin') - *Self-correction: Instead of `UserType` directly in `Users`, it's better to link `Users` to `Students`, `Staff`, or `Parents` tables. A user can be a parent *and* staff. So, `UserType` is less flexible.*
    *   **`Roles`**:
        *   `RoleID` (PK)
        *   `RoleName`
    *   **`Permissions`**:
        *   `PermissionID` (PK)
        *   `PermissionName`
        *   `Description`
    *   **`RolePermissions`** (Join table for `Roles` and `Permissions` - M:N)
        *   `RoleID` (FK)
        *   `PermissionID` (FK)
    *   **`UserRoles`** (Join table for `Users` and `Roles` - M:N)
        *   `UserID` (FK)
        *   `RoleID` (FK)

    *   **`Students`**:
        *   `StudentID` (PK)
        *   `UserID` (FK, nullable if student doesn't have a login directly, or if parents log in for them)
        *   `FirstName`, `LastName`, `DateOfBirth`, `Gender`, `Address`, `ContactNumber`, `AdmissionDate`, `EnrollmentStatus` (e.g., 'Enrolled', 'Graduated', 'Withdrawn')
        *   `ClassID` (FK - current class)
        *   `SectionID` (FK - current section)
        *   `ParentID` (FK - links to a `Parents` table or a `Users` table with role 'Parent') - *Self-correction: Let's make a dedicated `Parents` table and link students to parents.*
    *   **`Parents`**:
        *   `ParentID` (PK)
        *   `UserID` (FK - for login)
        *   `FirstName`, `LastName`, `ContactNumber`, `Email`, `Address`
    *   **`StudentParent`** (Join table for `Students` and `Parents` - M:N, as a student can have multiple parents/guardians, and a parent can have multiple children in the school)
        *   `StudentID` (FK)
        *   `ParentID` (FK)
        *   `RelationshipType` (e.g., 'Father', 'Mother', 'Guardian')

    *   **`Staff`**: (Teachers, Admin, Support Staff)
        *   `StaffID` (PK)
        *   `UserID` (FK - for login)
        *   `FirstName`, `LastName`, `DateOfBirth`, `Gender`, `Address`, `ContactNumber`, `Email`, `DateOfJoining`, `Designation`, `Department`
        *   `StaffType` (e.g., 'Teaching', 'Administrative', 'Support')
        *   `Salary` (for payroll - could be in a separate `Payroll` table)

    *   **`Classes`**: (e.g., Grade 1, Grade 10)
        *   `ClassID` (PK)
        *   `ClassName` (e.g., "Grade 1", "Class X")
        *   `AcademicYearID` (FK - to link to specific academic year)
    *   **`Sections`**: (e.g., Section A, Section B within a Class)
        *   `SectionID` (PK)
        *   `SectionName` (e.g., "A", "Blue")
        *   `ClassID` (FK)
        *   `ClassTeacherID` (FK, `StaffID` - optional, can be derived from timetable)
    *   **`AcademicYears`**:
        *   `AcademicYearID` (PK)
        *   `YearName` (e.g., "2023-2024")
        *   `StartDate`, `EndDate`

    *   **`Subjects`**: (e.g., Math, Science)
        *   `SubjectID` (PK)
        *   `SubjectName`
        *   `SubjectCode`

    *   **`ClassSubjects`** (Join table for which subjects are taught in which class/section - M:N)
        *   `ClassSubjectID` (PK)
        *   `ClassID` (FK)
        *   `SectionID` (FK, optional, if subjects vary by section)
        *   `SubjectID` (FK)
        *   `TeacherID` (FK, `StaffID` - who teaches this subject in this class/section)
        *   `AcademicYearID` (FK)

    *   **`TimetableSlots`**: (Predefined time periods for classes)
        *   `SlotID` (PK)
        *   `DayOfWeek` (e.g., Monday, Tuesday)
        *   `StartTime`, `EndTime`
    *   **`TimetableEntries`**:
        *   `EntryID` (PK)
        *   `ClassID` (FK)
        *   `SectionID` (FK)
        *   `SubjectID` (FK)
        *   `TeacherID` (FK, `StaffID`)
        *   `SlotID` (FK, `TimetableSlots`)
        *   `AcademicYearID` (FK)
        *   `RoomNumber` (optional)

    *   **`Attendance`**:
        *   `AttendanceID` (PK)
        *   `StudentID` (FK, nullable if for staff)
        *   `StaffID` (FK, nullable if for student)
        *   `Date`
        *   `Status` (e.g., 'Present', 'Absent', 'Late', 'Excused')
        *   `TimetableEntryID` (FK, optional, to link to a specific class period)
        *   `RecordedByStaffID` (FK, `StaffID` - who took the attendance)

    *   **`Exams`**:
        *   `ExamID` (PK)
        *   `ExamName` (e.g., "Mid-Term Exam", "Final Exam")
        *   `AcademicYearID` (FK)
        *   `StartDate`, `EndDate`
    *   **`ExamSchedules`**: (Which subject exam is on which date for which class)
        *   `ExamScheduleID` (PK)
        *   `ExamID` (FK)
        *   `ClassID` (FK)
        *   `SectionID` (FK, optional)
        *   `SubjectID` (FK)
        *   `ExamDate`
        *   `StartTime`, `EndTime`
        *   `MaxMarks`
        *   `RoomNumber` (optional)
    *   **`ExamResults`**:
        *   `ResultID` (PK)
        *   `ExamScheduleID` (FK)
        *   `StudentID` (FK)
        *   `MarksObtained`
        *   `Grade` (optional, can be calculated)
        *   `Remarks`

    *   **`Assignments`**:
        *   `AssignmentID` (PK)
        *   `ClassSubjectID` (FK - which class/subject this assignment belongs to)
        *   `Title`, `Description`, `DueDate`, `MaxMarks`
        *   `TeacherID` (FK, `StaffID` - who assigned it)
    *   **`StudentAssignments`**: (Submissions)
        *   `SubmissionID` (PK)
        *   `AssignmentID` (FK)
        *   `StudentID` (FK)
        *   `SubmissionDate`
        *   `SubmittedFile` (URL or path)
        *   `MarksObtained`
        *   `Feedback`

    *   **`FeeStructures`**:
        *   `FeeStructureID` (PK)
        *   `AcademicYearID` (FK)
        *   `ClassID` (FK, optional - if fees vary by class)
        *   `FeeType` (e.g., 'Tuition', 'Transport', 'Hostel', 'Exam')
        *   `Amount`
        *   `Frequency` (e.g., 'Monthly', 'Quarterly', 'Annual')
    *   **`StudentFees`**: (What a student owes based on structure)
        *   `StudentFeeID` (PK)
        *   `StudentID` (FK)
        *   `FeeStructureID` (FK)
        *   `DueDate`
        *   `AmountDue` (can be same as FeeStructure.Amount or adjusted)
        *   `Status` (e.g., 'Pending', 'Paid', 'Overdue', 'Waived')
    *   **`FeePayments`**:
        *   `PaymentID` (PK)
        *   `StudentFeeID` (FK - what this payment is for)
        *   `StudentID` (FK - for easier querying)
        *   `PaymentDate`
        *   `AmountPaid`
        *   `PaymentMethod` (e.g., 'Cash', 'Card', 'Online')
        *   `TransactionID` (optional)
        *   `ReceiptNumber`

    *   **`LibraryBooks`**:
        *   `BookID` (PK)
        *   `ISBN`, `Title`, `Author`, `Publisher`, `Edition`, `YearPublished`
        *   `CategoryID` (FK, `BookCategories`)
        *   `QuantityTotal`
        *   `QuantityAvailable`
    *   **`BookCategories`**:
        *   `CategoryID` (PK)
        *   `CategoryName`
    *   **`BookIssues`**:
        *   `IssueID` (PK)
        *   `BookID` (FK)
        *   `UserID` (FK - StudentID or StaffID)
        *   `IssueDate`
        *   `DueDate`
        *   `ReturnDate` (nullable)
        *   `FineAmount` (nullable)

    *   **`TransportRoutes`**:
        *   `RouteID` (PK)
        *   `RouteName`
        *   `RouteDetails` (description or list of stops)
    *   **`Buses`**:
        *   `BusID` (PK)
        *   `BusNumber`
        *   `Capacity`
        *   `DriverStaffID` (FK, `StaffID`)
        *   `AttendantStaffID` (FK, `StaffID`, optional)
        *   `RouteID` (FK, nullable if bus not assigned)
    *   **`StudentTransport`**:
        *   `StudentTransportID` (PK)
        *   `StudentID` (FK)
        *   `RouteID` (FK)
        *   `BusID` (FK)
        *   `PickupPoint`, `DropPoint`
        *   `AcademicYearID` (FK)

    *   **`InventoryItems`**:
        *   `ItemID` (PK)
        *   `ItemName`
        *   `Description`
        *   `CategoryID` (FK, `InventoryCategories`)
        *   `QuantityInStock`
        *   `Supplier`
        *   `PurchaseDate`
        *   `PurchasePrice`
    *   **`InventoryCategories`**:
        *   `CategoryID` (PK)
        *   `CategoryName`

    *   **`Events`**:
        *   `EventID` (PK)
        *   `EventName`
        *   `Description`
        *   `StartDate`, `EndDate`, `StartTime`, `EndTime`
        *   `Location`
        *   `EventType` (e.g., 'Holiday', 'School Event', 'Exam')
        *   `OrganizerStaffID` (FK, `StaffID`, optional)

    *   **`HostelRooms`**: (Optional Module)
        *   `RoomID` (PK)
        *   `RoomNumber`
        *   `HostelBlock`
        *   `Capacity`
        *   `RoomType`
    *   **`HostelAllocations`**: (Optional Module)
        *   `AllocationID` (PK)
        *   `StudentID` (FK)
        *   `RoomID` (FK)
        *   `AcademicYearID` (FK)
        *   `AllocationDate`
        *   `VacateDate` (nullable)

    *   **`Announcements`**:
        *   `AnnouncementID` (PK)
        *   `Title`
        *   `Content`
        *   `PublishDate`
        *   `ExpiryDate` (optional)
        *   `Audience` (e.g., 'All', 'Students', 'Parents', 'Staff', 'ClassX') - *Self-correction: better to have join tables for audience for flexibility.*
        *   `PostedByStaffID` (FK, `StaffID`)
    *   **`AnnouncementAudienceClasses`** (Join table)
        *   `AnnouncementID` (FK)
        *   `ClassID` (FK)
    *   **`AnnouncementAudienceRoles`** (Join table)
        *   `AnnouncementID` (FK)
        *   `RoleID` (FK)

    *   **`Messages`**: (For direct messaging, could be complex)
        *   `MessageID` (PK)
        *   `SenderUserID` (FK)
        *   `ReceiverUserID` (FK)
        *   `Subject` (optional)
        *   `Content`
        *   `SentTimestamp`
        *   `ReadTimestamp` (nullable)

4.  **Refine Relationships and Foreign Keys:**
    *   Go through each table and ensure FKs point to the correct PKs.
    *   Identify one-to-many (1:M) and many-to-many (M:N) relationships. M:N relationships need join tables.
    *   Example: Students and Parents (M:N) -> `StudentParent` join table.
    *   Example: Users and Roles (M:N) -> `UserRoles` join table.
    *   Example: Students and Subjects (M:N, indirect via `ClassSubjects` or `TimetableEntries`)

5.  **Add Common/Audit Fields:**
    *   `CreatedAt`, `UpdatedAt` for many tables.
    *   `CreatedByUserID`, `UpdatedByUserID` (optional, but good for auditing).

6.  **Consider Normalization:**
    *   Ensure tables are at least in 3NF where practical to reduce redundancy and improve data integrity.
    *   Example: Don't store `ClassName` in the `Students` table directly; link via `ClassID`.

7.  **Structure the Output:**
    *   List each table.
    *   For each table, list columns: Name, Data Type, Constraints (PK, FK, NOT NULL, UNIQUE), Description.
    *   Provide a brief explanation of relationships between tables.
    *   Add a "Key Relationships Explained" section.
    *   Add "General Considerations."

8.  **Review and Iterate:**
    *   Read through the entire model. Does it cover all modules?
    *   Are there any missing entities or attributes?
    *   Are relationships clear?
    *   Is it overly complex or too simple in any area?
    *   *Self-correction example during review:* Initially, I might have put `ClassTeacherID` in `Classes`. But a class might have multiple sections, each with a different class teacher. So, moving `ClassTeacherID` to `Sections` is better. Or, even better, the "class teacher" concept could be derived from who teaches the most core subjects to that section, or a designated role. For simplicity, `Sections.ClassTeacherID` is a reasonable compromise.
    *   *Self-correction:* `Academic` module might seem to overlap with `Subjects` and `Classes`. Clarify that `Academic` uses these and adds `Assignments`, `Grades`.
    *   *Self-correction:* Payroll and Performance evaluations are mentioned for Staff. These could be complex sub-modules. For this initial model, `Staff.Salary` is a placeholder. A full `Payroll` table and `PerformanceReviews` table would be needed for real implementation. I'll mention this as a potential extension.
    *   Ensure consistent naming conventions (e.g., `TableNameID` for PKs).

This systematic approach helps ensure all requirements are considered and a reasonably comprehensive and normalized data model is produced.


-----------------------------------------------------------------------

Okay, this is a comprehensive School Management System. Let's design a data model. I'll break it down by module, identifying core entities, their attributes, and relationships.

**General Conventions:**
*   **Primary Keys (PK):** Usually `TableNameID` (e.g., `StudentID`), auto-incrementing integer.
*   **Foreign Keys (FK):** `ReferencedTableNameID` (e.g., `ClassID` in `Students` table).
*   **Data Types:** I'll use common SQL data types (INT, VARCHAR, TEXT, DATE, DATETIME, DECIMAL, BOOLEAN).
*   **Timestamps:** `CreatedAt`, `UpdatedAt` for most tables to track record changes.

---

**Core & User Management Tables**

1.  **`Users`**
    *   `UserID` (PK, INT, AutoIncrement)
    *   `Username` (VARCHAR(50), UNIQUE, NOT NULL)
    *   `PasswordHash` (VARCHAR(255), NOT NULL)
    *   `Email` (VARCHAR(100), UNIQUE, NOT NULL)
    *   `UserType` (ENUM('Student', 'Parent', 'Teacher', 'Admin', 'Staff'), NOT NULL) - *Alternatively, link to specific role tables*
    *   `IsActive` (BOOLEAN, DEFAULT TRUE)
    *   `LastLogin` (DATETIME, NULLABLE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Central table for all system users. `UserType` helps identify the kind of user. For more fine-grained control, `UserType` could be replaced by linking to `Roles`.

2.  **`Roles`**
    *   `RoleID` (PK, INT, AutoIncrement)
    *   `RoleName` (VARCHAR(50), UNIQUE, NOT NULL) (e.g., 'Admin', 'Teacher', 'StudentAccount', 'ParentAccount', 'Librarian')
    *   `Description` (TEXT, NULLABLE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Defines different roles within the system.

3.  **`UserRoles`** (Junction Table for Many-to-Many between Users and Roles)
    *   `UserID` (FK, INT, REFERENCES `Users(UserID)`)
    *   `RoleID` (FK, INT, REFERENCES `Roles(RoleID)`)
    *   PRIMARY KEY (`UserID`, `RoleID`)
    *   **Explanation:** A user can have multiple roles (e.g., a teacher who is also a parent).

4.  **`Permissions`**
    *   `PermissionID` (PK, INT, AutoIncrement)
    *   `PermissionName` (VARCHAR(100), UNIQUE, NOT NULL) (e.g., 'CreateStudent', 'EditGrades', 'ViewAttendanceReport')
    *   `Description` (TEXT, NULLABLE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Defines specific actions a user can perform.

5.  **`RolePermissions`** (Junction Table for Many-to-Many between Roles and Permissions)
    *   `RoleID` (FK, INT, REFERENCES `Roles(RoleID)`)
    *   `PermissionID` (FK, INT, REFERENCES `Permissions(PermissionID)`)
    *   PRIMARY KEY (`RoleID`, `PermissionID`)
    *   **Explanation:** Assigns permissions to roles.

---

**Student & Staff Information Tables**

6.  **`AcademicYears`**
    *   `AcademicYearID` (PK, INT, AutoIncrement)
    *   `YearName` (VARCHAR(20), NOT NULL, e.g., "2023-2024")
    *   `StartDate` (DATE, NOT NULL)
    *   `EndDate` (DATE, NOT NULL)
    *   `IsCurrent` (BOOLEAN, DEFAULT FALSE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Defines academic sessions, crucial for filtering data by year.

7.  **`Classes`** (e.g., Grade 1, Grade 10)
    *   `ClassID` (PK, INT, AutoIncrement)
    *   `ClassName` (VARCHAR(50), NOT NULL) (e.g., "Grade 1", "Class X")
    *   `NumericLevel` (INT, NULLABLE) (e.g., 1 for Grade 1, 10 for Grade X)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Represents the grade levels.

8.  **`Sections`** (e.g., Section A, Section B within a Class)
    *   `SectionID` (PK, INT, AutoIncrement)
    *   `SectionName` (VARCHAR(50), NOT NULL) (e.g., "A", "Blue")
    *   `ClassID` (FK, INT, REFERENCES `Classes(ClassID)`)
    *   `ClassTeacherID` (FK, INT, NULLABLE, REFERENCES `Staff(StaffID)`) - *Primary teacher for this section*
    *   `Capacity` (INT, NULLABLE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Divides classes into smaller manageable groups.

9.  **`Students`**
    *   `StudentID` (PK, INT, AutoIncrement)
    *   `UserID` (FK, INT, NULLABLE, REFERENCES `Users(UserID)`) - *For student login, if applicable*
    *   `AdmissionNumber` (VARCHAR(50), UNIQUE, NOT NULL)
    *   `FirstName` (VARCHAR(50), NOT NULL)
    *   `LastName` (VARCHAR(50), NOT NULL)
    *   `DateOfBirth` (DATE, NOT NULL)
    *   `Gender` (ENUM('Male', 'Female', 'Other'), NOT NULL)
    *   `Address` (TEXT, NULLABLE)
    *   `ContactNumber` (VARCHAR(20), NULLABLE)
    *   `Email` (VARCHAR(100), NULLABLE, UNIQUE)
    *   `AdmissionDate` (DATE, NOT NULL)
    *   `PhotoURL` (VARCHAR(255), NULLABLE)
    *   `BloodGroup` (VARCHAR(5), NULLABLE)
    *   `Nationality` (VARCHAR(50), NULLABLE)
    *   `PreviousSchool` (VARCHAR(100), NULLABLE)
    *   `EnrollmentStatus` (ENUM('Enrolled', 'Graduated', 'Withdrawn', 'Transferred'), DEFAULT 'Enrolled')
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Core student profile information.

10. **`StudentEnrollments`**
    *   `EnrollmentID` (PK, INT, AutoIncrement)
    *   `StudentID` (FK, INT, REFERENCES `Students(StudentID)`)
    *   `ClassID` (FK, INT, REFERENCES `Classes(ClassID)`)
    *   `SectionID` (FK, INT, REFERENCES `Sections(SectionID)`)
    *   `AcademicYearID` (FK, INT, REFERENCES `AcademicYears(AcademicYearID)`)
    *   `RollNumber` (VARCHAR(20), NULLABLE)
    *   `EnrollmentDate` (DATE, DEFAULT CURRENT_DATE)
    *   `IsActive` (BOOLEAN, DEFAULT TRUE) -- True if this is the current enrollment
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   PRIMARY KEY (`EnrollmentID`)
    *   UNIQUE (`StudentID`, `AcademicYearID`) -- A student is enrolled in one class/section per academic year
    *   **Explanation:** Tracks a student's enrollment in a specific class, section, and academic year. Allows for history.

11. **`Parents`**
    *   `ParentID` (PK, INT, AutoIncrement)
    *   `UserID` (FK, INT, NULLABLE, REFERENCES `Users(UserID)`) - *For parent portal login*
    *   `FirstName` (VARCHAR(50), NOT NULL)
    *   `LastName` (VARCHAR(50), NOT NULL)
    *   `RelationToStudent` (VARCHAR(30), NOT NULL) (e.g., 'Father', 'Mother', 'Guardian')
    *   `ContactNumber` (VARCHAR(20), NOT NULL)
    *   `Email` (VARCHAR(100), UNIQUE, NOT NULL)
    *   `Address` (TEXT, NULLABLE)
    *   `Occupation` (VARCHAR(100), NULLABLE)
    *   `PhotoURL` (VARCHAR(255), NULLABLE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Information about parents/guardians.

12. **`StudentParents`** (Junction Table for Many-to-Many between Students and Parents)
    *   `StudentID` (FK, INT, REFERENCES `Students(StudentID)`)
    *   `ParentID` (FK, INT, REFERENCES `Parents(ParentID)`)
    *   PRIMARY KEY (`StudentID`, `ParentID`)
    *   `IsPrimaryContact` (BOOLEAN, DEFAULT FALSE)
    *   **Explanation:** Links students to their parents/guardians. A student can have multiple, and a parent can have multiple children.

13. **`Staff`**
    *   `StaffID` (PK, INT, AutoIncrement)
    *   `UserID` (FK, INT, NULLABLE, REFERENCES `Users(UserID)`) - *For staff login*
    *   `EmployeeID` (VARCHAR(50), UNIQUE, NOT NULL)
    *   `FirstName` (VARCHAR(50), NOT NULL)
    *   `LastName` (VARCHAR(50), NOT NULL)
    *   `DateOfBirth` (DATE, NOT NULL)
    *   `Gender` (ENUM('Male', 'Female', 'Other'), NOT NULL)
    *   `Designation` (VARCHAR(100), NOT NULL) (e.g., 'Math Teacher', 'Principal', 'Librarian', 'Accountant')
    *   `Department` (VARCHAR(100), NULLABLE) (e.g., 'Science', 'Administration', 'Accounts')
    *   `ContactNumber` (VARCHAR(20), NOT NULL)
    *   `Email` (VARCHAR(100), UNIQUE, NOT NULL)
    *   `Address` (TEXT, NULLABLE)
    *   `DateOfJoining` (DATE, NOT NULL)
    *   `Qualification` (TEXT, NULLABLE)
    *   `Experience` (TEXT, NULLABLE)
    *   `PhotoURL` (VARCHAR(255), NULLABLE)
    *   `EmploymentStatus` (ENUM('Active', 'Resigned', 'Terminated'), DEFAULT 'Active')
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Profile information for all staff (teaching and non-teaching).

14. **`StaffSalaries`** (For Payroll)
    *   `SalaryID` (PK, INT, AutoIncrement)
    *   `StaffID` (FK, INT, REFERENCES `Staff(StaffID)`)
    *   `AcademicYearID` (FK, INT, REFERENCES `AcademicYears(AcademicYearID)`)
    *   `Month` (INT, NOT NULL) -- 1 for Jan, 12 for Dec
    *   `Year` (INT, NOT NULL)
    *   `BasicSalary` (DECIMAL(10,2), NOT NULL)
    *   `Allowances` (DECIMAL(10,2), DEFAULT 0.00)
    *   `Deductions` (DECIMAL(10,2), DEFAULT 0.00)
    *   `NetSalary` (DECIMAL(10,2), NOT NULL)
    *   `PaymentDate` (DATE, NULLABLE)
    *   `PaymentStatus` (ENUM('Pending', 'Paid', 'Processing'), DEFAULT 'Pending')
    *   `TransactionDetails` (TEXT, NULLABLE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   UNIQUE (`StaffID`, `Month`, `Year`)
    *   **Explanation:** Tracks salary payments for staff.

15. **`StaffPerformanceReviews`**
    *   `ReviewID` (PK, INT, AutoIncrement)
    *   `StaffID` (FK, INT, REFERENCES `Staff(StaffID)`)
    *   `AcademicYearID` (FK, INT, REFERENCES `AcademicYears(AcademicYearID)`)
    *   `ReviewDate` (DATE, NOT NULL)
    *   `ReviewerStaffID` (FK, INT, REFERENCES `Staff(StaffID)`) -- Staff who conducted the review
    *   `Rating` (DECIMAL(3,1), NULLABLE) -- e.g., 1.0 to 5.0
    *   `Comments` (TEXT, NULLABLE)
    *   `GoalsForNextPeriod` (TEXT, NULLABLE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Stores records of staff performance evaluations.

---

**Academic & Timetable Tables**

16. **`Subjects`**
    *   `SubjectID` (PK, INT, AutoIncrement)
    *   `SubjectName` (VARCHAR(100), NOT NULL)
    *   `SubjectCode` (VARCHAR(20), UNIQUE, NOT NULL)
    *   `Description` (TEXT, NULLABLE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** List of all subjects offered.

17. **`ClassSubjects`** (Assigns subjects and teachers to classes/sections for an academic year)
    *   `ClassSubjectID` (PK, INT, AutoIncrement)
    *   `ClassID` (FK, INT, REFERENCES `Classes(ClassID)`)
    *   `SectionID` (FK, INT, NULLABLE, REFERENCES `Sections(SectionID)`) -- Can be NULL if subject is for whole class, not section specific
    *   `SubjectID` (FK, INT, REFERENCES `Subjects(SubjectID)`)
    *   `TeacherID` (FK, INT, REFERENCES `Staff(StaffID)`) -- Teacher assigned to this subject for this class/section
    *   `AcademicYearID` (FK, INT, REFERENCES `AcademicYears(AcademicYearID)`)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   UNIQUE (`ClassID`, `SectionID`, `SubjectID`, `AcademicYearID`)
    *   **Explanation:** Maps which teacher teaches which subject in which class/section for a given academic year. Fundamental for timetable and academics.

18. **`TimetableSlots`**
    *   `SlotID` (PK, INT, AutoIncrement)
    *   `DayOfWeek` (ENUM('Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'), NOT NULL)
    *   `StartTime` (TIME, NOT NULL)
    *   `EndTime` (TIME, NOT NULL)
    *   `SlotName` (VARCHAR(50), NULLABLE) (e.g., "Period 1", "Lunch Break")
    *   `IsBreak` (BOOLEAN, DEFAULT FALSE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Defines the time slots for the school day.

19. **`TimetableEntries`**
    *   `EntryID` (PK, INT, AutoIncrement)
    *   `ClassSubjectID` (FK, INT, REFERENCES `ClassSubjects(ClassSubjectID)`)
    *   `SlotID` (FK, INT, REFERENCES `TimetableSlots(SlotID)`)
    *   `AcademicYearID` (FK, INT, REFERENCES `AcademicYears(AcademicYearID)`)
    *   `RoomNumber` (VARCHAR(20), NULLABLE)
    *   `SubstituteTeacherID` (FK, INT, NULLABLE, REFERENCES `Staff(StaffID)`)
    *   `Notes` (TEXT, NULLABLE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   UNIQUE (`ClassSubjectID`, `SlotID`, `AcademicYearID`) -- Assuming one subject per slot for a class
    *   **Explanation:** Actual timetable schedule. Links a class-subject-teacher combination to a time slot.

20. **`StudentAttendance`**
    *   `AttendanceID` (PK, INT, AutoIncrement)
    *   `StudentID` (FK, INT, REFERENCES `Students(StudentID)`)
    *   `ClassID` (FK, INT, REFERENCES `Classes(ClassID)`) -- For easier querying
    *   `SectionID` (FK, INT, REFERENCES `Sections(SectionID)`) -- For easier querying
    *   `AcademicYearID` (FK, INT, REFERENCES `AcademicYears(AcademicYearID)`)
    *   `AttendanceDate` (DATE, NOT NULL)
    *   `TimetableEntryID` (FK, INT, NULLABLE, REFERENCES `TimetableEntries(EntryID)`) -- For period-wise attendance
    *   `Status` (ENUM('Present', 'Absent', 'Late', 'Excused'), NOT NULL)
    *   `Remarks` (TEXT, NULLABLE)
    *   `RecordedByStaffID` (FK, INT, REFERENCES `Staff(StaffID)`)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   UNIQUE (`StudentID`, `AttendanceDate`, `TimetableEntryID`) -- If period-wise, else UNIQUE (`StudentID`, `AttendanceDate`) for day-wise
    *   **Explanation:** Tracks student attendance. Can be daily or period-wise.

21. **`StaffAttendance`**
    *   `StaffAttendanceID` (PK, INT, AutoIncrement)
    *   `StaffID` (FK, INT, REFERENCES `Staff(StaffID)`)
    *   `AttendanceDate` (DATE, NOT NULL)
    *   `Status` (ENUM('Present', 'Absent', 'Late', 'OnLeave', 'HalfDay'), NOT NULL)
    *   `CheckInTime` (TIME, NULLABLE)
    *   `CheckOutTime` (TIME, NULLABLE)
    *   `Remarks` (TEXT, NULLABLE)
    *   `RecordedByStaffID` (FK, INT, REFERENCES `Staff(StaffID)`)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   UNIQUE (`StaffID`, `AttendanceDate`)
    *   **Explanation:** Tracks staff attendance.

---

**Examination & Academic Records Tables**

22. **`ExamTypes`**
    *   `ExamTypeID` (PK, INT, AutoIncrement)
    *   `TypeName` (VARCHAR(50), NOT NULL) (e.g., "Unit Test", "Mid-Term", "Final Exam", "Practical")
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Defines different types of examinations.

23. **`Exams`**
    *   `ExamID` (PK, INT, AutoIncrement)
    *   `ExamName` (VARCHAR(100), NOT NULL) (e.g., "Mid-Term Exams 2023-24")
    *   `ExamTypeID` (FK, INT, REFERENCES `ExamTypes(ExamTypeID)`)
    *   `AcademicYearID` (FK, INT, REFERENCES `AcademicYears(AcademicYearID)`)
    *   `StartDate` (DATE, NOT NULL)
    *   `EndDate` (DATE, NOT NULL)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Defines an examination event (e.g., "First Term Exam").

24. **`ExamSchedules`**
    *   `ExamScheduleID` (PK, INT, AutoIncrement)
    *   `ExamID` (FK, INT, REFERENCES `Exams(ExamID)`)
    *   `ClassID` (FK, INT, REFERENCES `Classes(ClassID)`)
    *   `SectionID` (FK, INT, NULLABLE, REFERENCES `Sections(SectionID)`) -- If exam is section-specific
    *   `SubjectID` (FK, INT, REFERENCES `Subjects(SubjectID)`)
    *   `ExamDate` (DATE, NOT NULL)
    *   `StartTime` (TIME, NOT NULL)
    *   `EndTime` (TIME, NOT NULL)
    *   `MaxMarks` (DECIMAL(5,2), NOT NULL)
    *   `PassingMarks` (DECIMAL(5,2), NOT NULL)
    *   `RoomNumber` (VARCHAR(20), NULLABLE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   UNIQUE (`ExamID`, `ClassID`, `SectionID`, `SubjectID`)
    *   **Explanation:** Details of each specific exam paper (subject, date, time, marks).

25. **`ExamResults`**
    *   `ResultID` (PK, INT, AutoIncrement)
    *   `ExamScheduleID` (FK, INT, REFERENCES `ExamSchedules(ExamScheduleID)`)
    *   `StudentID` (FK, INT, REFERENCES `Students(StudentID)`)
    *   `MarksObtained` (DECIMAL(5,2), NOT NULL)
    *   `Grade` (VARCHAR(10), NULLABLE) -- Can be calculated or entered
    *   `Remarks` (TEXT, NULLABLE)
    *   `IsAbsent` (BOOLEAN, DEFAULT FALSE)
    *   `RecordedByStaffID` (FK, INT, REFERENCES `Staff(StaffID)`)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   UNIQUE (`ExamScheduleID`, `StudentID`)
    *   **Explanation:** Stores marks obtained by students in exams.

26. **`Assignments`**
    *   `AssignmentID` (PK, INT, AutoIncrement)
    *   `ClassSubjectID` (FK, INT, REFERENCES `ClassSubjects(ClassSubjectID)`)
    *   `Title` (VARCHAR(255), NOT NULL)
    *   `Description` (TEXT, NULLABLE)
    *   `AssignedDate` (DATE, NOT NULL)
    *   `DueDate` (DATE, NOT NULL)
    *   `MaxMarks` (DECIMAL(5,2), NULLABLE)
    *   `AttachmentURL` (VARCHAR(255), NULLABLE)
    *   `TeacherID` (FK, INT, REFERENCES `Staff(StaffID)`) -- Staff who created/assigned it
    *   `AcademicYearID` (FK, INT, REFERENCES `AcademicYears(AcademicYearID)`)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Details of assignments given to students.

27. **`StudentAssignments`** (Submissions & Grades)
    *   `StudentAssignmentID` (PK, INT, AutoIncrement)
    *   `AssignmentID` (FK, INT, REFERENCES `Assignments(AssignmentID)`)
    *   `StudentID` (FK, INT, REFERENCES `Students(StudentID)`)
    *   `SubmissionDate` (DATETIME, NULLABLE)
    *   `SubmittedFileURL` (VARCHAR(255), NULLABLE)
    *   `MarksObtained` (DECIMAL(5,2), NULLABLE)
    *   `Feedback` (TEXT, NULLABLE)
    *   `Status` (ENUM('Pending', 'Submitted', 'Late', 'Graded'), DEFAULT 'Pending')
    *   `GradedByStaffID` (FK, INT, NULLABLE, REFERENCES `Staff(StaffID)`)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   UNIQUE (`AssignmentID`, `StudentID`)
    *   **Explanation:** Tracks student submissions and grades for assignments.

28. **`GradeScales`**
    *   `GradeScaleID` (PK, INT, AutoIncrement)
    *   `GradeName` (VARCHAR(10), NOT NULL) (e.g., "A+", "B", "Pass")
    *   `MinPercentage` (DECIMAL(5,2), NOT NULL)
    *   `MaxPercentage` (DECIMAL(5,2), NOT NULL)
    *   `Description` (VARCHAR(50), NULLABLE)
    *   `AcademicYearID` (FK, INT, NULLABLE, REFERENCES `AcademicYears(AcademicYearID)`) -- Can be year specific
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Defines the grading system (e.g., 90-100% = A+).

29. **`ReportCards`** (Generated entity, but can be stored)
    *   `ReportCardID` (PK, INT, AutoIncrement)
    *   `StudentID` (FK, INT, REFERENCES `Students(StudentID)`)
    *   `AcademicYearID` (FK, INT, REFERENCES `AcademicYears(AcademicYearID)`)
    *   `ClassID` (FK, INT, REFERENCES `Classes(ClassID)`)
    *   `SectionID` (FK, INT, REFERENCES `Sections(SectionID)`)
    *   `TermName` (VARCHAR(50), NOT NULL) (e.g., "Term 1", "Annual")
    *   `OverallPercentage` (DECIMAL(5,2), NULLABLE)
    *   `OverallGrade` (VARCHAR(10), NULLABLE)
    *   `TeacherRemarks` (TEXT, NULLABLE)
    *   `PrincipalRemarks` (TEXT, NULLABLE)
    *   `GeneratedDate` (DATE, NOT NULL)
    *   `PublishedDate` (DATE, NULLABLE)
    *   `Status` (ENUM('Draft', 'Published', 'Archived'), DEFAULT 'Draft')
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Summary of a student's performance for a term/year. Data is aggregated from `ExamResults` and `StudentAssignments`.

---

**Fee Management Tables**

30. **`FeeCategories`**
    *   `FeeCategoryID` (PK, INT, AutoIncrement)
    *   `CategoryName` (VARCHAR(100), NOT NULL, UNIQUE) (e.g., "Tuition Fee", "Transport Fee", "Exam Fee", "Hostel Fee")
    *   `Description` (TEXT, NULLABLE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Different types of fees.

31. **`FeeStructures`**
    *   `FeeStructureID` (PK, INT, AutoIncrement)
    *   `FeeCategoryID` (FK, INT, REFERENCES `FeeCategories(FeeCategoryID)`)
    *   `ClassID` (FK, INT, NULLABLE, REFERENCES `Classes(ClassID)`) -- If fee varies by class
    *   `AcademicYearID` (FK, INT, REFERENCES `AcademicYears(AcademicYearID)`)
    *   `Amount` (DECIMAL(10,2), NOT NULL)
    *   `Frequency` (ENUM('Monthly', 'Quarterly', 'HalfYearly', 'Annually', 'OneTime'), NOT NULL)
    *   `DueDatePattern` (VARCHAR(50), NULLABLE) -- e.g., "5th of month", "Start of Term"
    *   `LateFeePerDay` (DECIMAL(8,2), DEFAULT 0.00)
    *   `Description` (TEXT, NULLABLE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   UNIQUE (`FeeCategoryID`, `ClassID`, `AcademicYearID`, `Frequency`)
    *   **Explanation:** Defines the amount and frequency for different fee categories, possibly class-wise.

32. **`StudentFeeInstallments`** (Generated based on FeeStructure and StudentEnrollment)
    *   `InstallmentID` (PK, INT, AutoIncrement)
    *   `StudentID` (FK, INT, REFERENCES `Students(StudentID)`)
    *   `FeeStructureID` (FK, INT, REFERENCES `FeeStructures(FeeStructureID)`)
    *   `AcademicYearID` (FK, INT, REFERENCES `AcademicYears(AcademicYearID)`)
    *   `InstallmentName` (VARCHAR(100), NOT NULL) (e.g., "April Tuition Fee", "Term 1 Transport Fee")
    *   `AmountDue` (DECIMAL(10,2), NOT NULL)
    *   `DueDate` (DATE, NOT NULL)
    *   `AmountPaid` (DECIMAL(10,2), DEFAULT 0.00)
    *   `WaiverAmount` (DECIMAL(10,2), DEFAULT 0.00)
    *   `LateFeeApplied` (DECIMAL(8,2), DEFAULT 0.00)
    *   `BalanceAmount` (DECIMAL(10,2), AS (`AmountDue` + `LateFeeApplied` - `AmountPaid` - `WaiverAmount`)) STORED
    *   `Status` (ENUM('Pending', 'PartiallyPaid', 'Paid', 'Overdue', 'Waived'), DEFAULT 'Pending')
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Individual fee installments a student needs to pay.

33. **`FeePayments`**
    *   `PaymentID` (PK, INT, AutoIncrement)
    *   `InstallmentID` (FK, INT, REFERENCES `StudentFeeInstallments(InstallmentID)`)
    *   `StudentID` (FK, INT, REFERENCES `Students(StudentID)`) -- Denormalized for easier querying
    *   `PaymentDate` (DATE, NOT NULL)
    *   `AmountPaid` (DECIMAL(10,2), NOT NULL)
    *   `PaymentMode` (ENUM('Cash', 'Card', 'Online', 'Cheque'), NOT NULL)
    *   `TransactionID` (VARCHAR(100), NULLABLE)
    *   `ReceiptNumber` (VARCHAR(50), UNIQUE, NOT NULL)
    *   `Notes` (TEXT, NULLABLE)
    *   `CollectedByStaffID` (FK, INT, REFERENCES `Staff(StaffID)`)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Records actual fee payments made by students.

---

**Library Tables**

34. **`BookCategories`**
    *   `BookCategoryID` (PK, INT, AutoIncrement)
    *   `CategoryName` (VARCHAR(100), NOT NULL, UNIQUE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Categories for library books (e.g., Fiction, Science, History).

35. **`LibraryBooks`**
    *   `BookID` (PK, INT, AutoIncrement)
    *   `ISBN` (VARCHAR(20), UNIQUE, NOT NULL)
    *   `Title` (VARCHAR(255), NOT NULL)
    *   `Author` (VARCHAR(255), NOT NULL)
    *   `Publisher` (VARCHAR(100), NULLABLE)
    *   `PublicationYear` (INT, NULLABLE)
    *   `Edition` (VARCHAR(50), NULLABLE)
    *   `BookCategoryID` (FK, INT, REFERENCES `BookCategories(BookCategoryID)`)
    *   `TotalCopies` (INT, NOT NULL, DEFAULT 1)
    *   `AvailableCopies` (INT, NOT NULL, DEFAULT 1)
    *   `ShelfLocation` (VARCHAR(50), NULLABLE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Details of each book in the library.

36. **`BookIssues`**
    *   `IssueID` (PK, INT, AutoIncrement)
    *   `BookID` (FK, INT, REFERENCES `LibraryBooks(BookID)`)
    *   `UserID` (FK, INT, REFERENCES `Users(UserID)`) -- Can be Student or Staff
    *   `IssueDate` (DATE, NOT NULL)
    *   `DueDate` (DATE, NOT NULL)
    *   `ReturnDate` (DATE, NULLABLE)
    *   `FineAmount` (DECIMAL(8,2), DEFAULT 0.00)
    *   `FineStatus` (ENUM('None', 'Pending', 'Paid'), DEFAULT 'None')
    *   `IssuedByStaffID` (FK, INT, REFERENCES `Staff(StaffID)`) -- Librarian
    *   `ReceivedByStaffID` (FK, INT, NULLABLE, REFERENCES `Staff(StaffID)`) -- Librarian on return
    *   `Status` (ENUM('Issued', 'Returned', 'Lost'), DEFAULT 'Issued')
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Tracks borrowing and returning of books.

---

**Transport Tables**

37. **`TransportRoutes`**
    *   `RouteID` (PK, INT, AutoIncrement)
    *   `RouteName` (VARCHAR(100), NOT NULL, UNIQUE) (e.g., "Route A - City Center")
    *   `RouteDescription` (TEXT, NULLABLE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Defines different bus routes.

38. **`RouteStops`**
    *   `StopID` (PK, INT, AutoIncrement)
    *   `RouteID` (FK, INT, REFERENCES `TransportRoutes(RouteID)`)
    *   `StopName` (VARCHAR(100), NOT NULL)
    *   `Latitude` (DECIMAL(10,8), NULLABLE)
    *   `Longitude` (DECIMAL(11,8), NULLABLE)
    *   `PickupTime` (TIME, NULLABLE)
    *   `DropTime` (TIME, NULLABLE)
    *   `SequenceOrder` (INT, NOT NULL) -- Order of stops in the route
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Defines specific stops along a route.

39. **`Vehicles`** (Buses)
    *   `VehicleID` (PK, INT, AutoIncrement)
    *   `VehicleNumber` (VARCHAR(20), UNIQUE, NOT NULL)
    *   `VehicleType` (VARCHAR(50), DEFAULT 'Bus')
    *   `Capacity` (INT, NOT NULL)
    *   `DriverStaffID` (FK, INT, NULLABLE, REFERENCES `Staff(StaffID)`)
    *   `AttendantStaffID` (FK, INT, NULLABLE, REFERENCES `Staff(StaffID)`)
    *   `GPSDeviceID` (VARCHAR(50), NULLABLE) -- For real-time tracking
    *   `Status` (ENUM('Active', 'Maintenance', 'Inactive'), DEFAULT 'Active')
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Information about school transport vehicles.

40. **`VehicleRouteAssignments`**
    *   `AssignmentID` (PK, INT, AutoIncrement)
    *   `VehicleID` (FK, INT, REFERENCES `Vehicles(VehicleID)`)
    *   `RouteID` (FK, INT, REFERENCES `TransportRoutes(RouteID)`)
    *   `AcademicYearID` (FK, INT, REFERENCES `AcademicYears(AcademicYearID)`)
    *   `StartDate` (DATE, NOT NULL)
    *   `EndDate` (DATE, NULLABLE)
    *   `IsActive` (BOOLEAN, DEFAULT TRUE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   UNIQUE (`VehicleID`, `RouteID`, `AcademicYearID`)
    *   **Explanation:** Assigns vehicles to routes for an academic year.

41. **`StudentTransportAllocations`**
    *   `AllocationID` (PK, INT, AutoIncrement)
    *   `StudentID` (FK, INT, REFERENCES `Students(StudentID)`)
    *   `VehicleRouteAssignmentID` (FK, INT, REFERENCES `VehicleRouteAssignments(AssignmentID)`)
    *   `PickupStopID` (FK, INT, REFERENCES `RouteStops(StopID)`)
    *   `DropStopID` (FK, INT, REFERENCES `RouteStops(StopID)`)
    *   `AcademicYearID` (FK, INT, REFERENCES `AcademicYears(AcademicYearID)`)
    *   `StartDate` (DATE, NOT NULL)
    *   `EndDate` (DATE, NULLABLE)
    *   `IsActive` (BOOLEAN, DEFAULT TRUE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   UNIQUE (`StudentID`, `AcademicYearID`) -- Assuming a student uses one transport service per year
    *   **Explanation:** Links a student to a specific bus, route, and stop.

---

**Communication Tables**

42. **`Announcements`**
    *   `AnnouncementID` (PK, INT, AutoIncrement)
    *   `Title` (VARCHAR(255), NOT NULL)
    *   `Content` (TEXT, NOT NULL)
    *   `PublishDate` (DATETIME, NOT NULL)
    *   `ExpiryDate` (DATETIME, NULLABLE)
    *   `PostedByUserID` (FK, INT, REFERENCES `Users(UserID)`) -- User who posted
    *   `AttachmentURL` (VARCHAR(255), NULLABLE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** General announcements. Audience can be managed by junction tables.

43. **`AnnouncementAudiences`** (Junction Table for Many-to-Many for Announcement targeting)
    *   `AnnouncementID` (FK, INT, REFERENCES `Announcements(AnnouncementID)`)
    *   `RoleID` (FK, INT, NULLABLE, REFERENCES `Roles(RoleID)`) -- Target specific roles
    *   `ClassID` (FK, INT, NULLABLE, REFERENCES `Classes(ClassID)`) -- Target specific classes
    *   `SectionID` (FK, INT, NULLABLE, REFERENCES `Sections(SectionID)`) -- Target specific sections
    *   PRIMARY KEY (`AnnouncementID`, `RoleID`, `ClassID`, `SectionID`) -- Adjust PK as needed if only one is used
    *   **Explanation:** Specifies who the announcement is for (e.g., all teachers, Grade 5 students).

44. **`Messages`** (For direct messaging, can become complex with threads)
    *   `MessageID` (PK, INT, AutoIncrement)
    *   `SenderUserID` (FK, INT, REFERENCES `Users(UserID)`)
    *   `ReceiverUserID` (FK, INT, REFERENCES `Users(UserID)`)
    *   `Subject` (VARCHAR(255), NULLABLE)
    *   `Content` (TEXT, NOT NULL)
    *   `SentTimestamp` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `ReadTimestamp` (DATETIME, NULLABLE)
    *   `IsRead` (BOOLEAN, DEFAULT FALSE)
    *   `ParentMessageID` (FK, INT, NULLABLE, REFERENCES `Messages(MessageID)`) -- For threading
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** For one-to-one or small group messaging.

---

**Inventory & Events Tables**

45. **`InventoryCategories`**
    *   `InventoryCategoryID` (PK, INT, AutoIncrement)
    *   `CategoryName` (VARCHAR(100), NOT NULL, UNIQUE) (e.g., "Stationery", "Electronics", "Furniture", "Sports Goods")
    *   `Description` (TEXT, NULLABLE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Categories for school assets and supplies.

46. **`InventoryItems`**
    *   `ItemID` (PK, INT, AutoIncrement)
    *   `ItemName` (VARCHAR(255), NOT NULL)
    *   `InventoryCategoryID` (FK, INT, REFERENCES `InventoryCategories(InventoryCategoryID)`)
    *   `Description` (TEXT, NULLABLE)
    *   `Quantity` (INT, NOT NULL)
    *   `UnitPrice` (DECIMAL(10,2), NULLABLE)
    *   `Supplier` (VARCHAR(100), NULLABLE)
    *   `PurchaseDate` (DATE, NULLABLE)
    *   `Location` (VARCHAR(100), NULLABLE) (e.g., "Store Room A", "Lab 1")
    *   `SerialNumber` (VARCHAR(100), NULLABLE, UNIQUE) -- For unique assets like computers
    *   `Condition` (ENUM('Good', 'Fair', 'NeedsRepair', 'Damaged'), DEFAULT 'Good')
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Tracks individual school assets and supplies.

47. **`EventTypes`**
    *   `EventTypeID` (PK, INT, AutoIncrement)
    *   `TypeName` (VARCHAR(50), NOT NULL) (e.g., 'Holiday', 'School Event', 'Exam Period', 'Meeting', 'Sports Day')
    *   `ColorCode` (VARCHAR(7), NULLABLE) -- For calendar display (e.g., '#FF0000')
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Categorizes events for better organization and display on calendars.

48. **`Events`** (School Calendar Events)
    *   `EventID` (PK, INT, AutoIncrement)
    *   `EventName` (VARCHAR(255), NOT NULL)
    *   `EventTypeID` (FK, INT, REFERENCES `EventTypes(EventTypeID)`)
    *   `Description` (TEXT, NULLABLE)
    *   `StartDate` (DATETIME, NOT NULL)
    *   `EndDate` (DATETIME, NOT NULL)
    *   `Location` (VARCHAR(100), NULLABLE)
    *   `IsHoliday` (BOOLEAN, DEFAULT FALSE)
    *   `OrganizerStaffID` (FK, INT, NULLABLE, REFERENCES `Staff(StaffID)`)
    *   `Audience` (TEXT, NULLABLE) -- Can be free text or linked to roles/classes via junction tables similar to Announcements
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Manages school events, holidays, and calendar entries.

---

**Hostel (Optional) Tables**

49. **`HostelBlocks`**
    *   `BlockID` (PK, INT, AutoIncrement)
    *   `BlockName` (VARCHAR(50), NOT NULL, UNIQUE) (e.g., "Boys Hostel A", "Girls Hostel B")
    *   `WardenStaffID` (FK, INT, NULLABLE, REFERENCES `Staff(StaffID)`)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Defines different hostel buildings or blocks.

50. **`HostelRoomTypes`**
    *   `RoomTypeID` (PK, INT, AutoIncrement)
    *   `TypeName` (VARCHAR(50), NOT NULL) (e.g., "Single Seater AC", "Double Seater Non-AC")
    *   `Capacity` (INT, NOT NULL)
    *   `Description` (TEXT, NULLABLE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   **Explanation:** Different types of rooms available in hostels.

51. **`HostelRooms`**
    *   `RoomID` (PK, INT, AutoIncrement)
    *   `BlockID` (FK, INT, REFERENCES `HostelBlocks(BlockID)`)
    *   `RoomTypeID` (FK, INT, REFERENCES `HostelRoomTypes(RoomTypeID)`)
    *   `RoomNumber` (VARCHAR(20), NOT NULL)
    *   `Floor` (VARCHAR(10), NULLABLE)
    *   `Status` (ENUM('Available', 'Occupied', 'Maintenance'), DEFAULT 'Available')
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   UNIQUE (`BlockID`, `RoomNumber`)
    *   **Explanation:** Individual hostel rooms.

52. **`HostelAllocations`**
    *   `AllocationID` (PK, INT, AutoIncrement)
    *   `StudentID` (FK, INT, REFERENCES `Students(StudentID)`)
    *   `RoomID` (FK, INT, REFERENCES `HostelRooms(RoomID)`)
    *   `AcademicYearID` (FK, INT, REFERENCES `AcademicYears(AcademicYearID)`)
    *   `AllocationDate` (DATE, NOT NULL)
    *   `VacateDate` (DATE, NULLABLE)
    *   `Notes` (TEXT, NULLABLE)
    *   `IsActive` (BOOLEAN, DEFAULT TRUE)
    *   `CreatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP)
    *   `UpdatedAt` (DATETIME, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP)
    *   UNIQUE (`StudentID`, `AcademicYearID`) -- Student allocated to one room per year
    *   UNIQUE (`RoomID`, `AcademicYearID`, `IsActive`=TRUE where student still allocated) -- To ensure only one active student per bed
    *   **Explanation:** Tracks student allocation to hostel rooms.

---

**Parent Portal, Reports/Analytics**

*   **Parent Portal:** This is not a separate set of tables. It's a *view* or *interface* that draws data from existing tables like `Students`, `StudentAttendance`, `ExamResults`, `StudentFeeInstallments`, `Announcements`, etc., filtered by the logged-in parent's associated child(ren) (via `StudentParents` table).
*   **Reports/Analytics:** Similarly, these are generated by querying and aggregating data from the above tables. No new core tables are usually needed, though sometimes summary tables or data warehouse structures are built for performance with very large datasets.

---

**Key Relationships Explained:**

*   **Users, Roles, Permissions:** `Users` can have multiple `Roles` (via `UserRoles`). Each `Role` has multiple `Permissions` (via `RolePermissions`). This forms the basis of security.
*   **Students & Academics:** `Students` are enrolled in a `Class` and `Section` for an `AcademicYear` (via `StudentEnrollments`). `Classes`/`Sections` are taught `Subjects` by `Teachers` (`Staff`) (via `ClassSubjects`). This structure links students to their curriculum and teachers.
*   **Timetable:** `TimetableEntries` connect `ClassSubjects` (which links class, subject, teacher) to `TimetableSlots` (day/time).
*   **Attendance:** `StudentAttendance` links `Students` to dates and potentially specific `TimetableEntries` (periods).
*   **Exams:** `Exams` are scheduled (via `ExamSchedules` for specific classes/subjects), and `Students` get `ExamResults`.
*   **Fees:** `FeeStructures` define costs. `StudentFeeInstallments` are generated for each `Student`, and `FeePayments` track payments against these installments.
*   **Students & Parents:** `Students` are linked to `Parents` via the `StudentParents` table, enabling parents to access their child's information.

---

This is a fairly detailed starting point. Depending on specific requirements, some tables might be simplified, or new ones added (e.g., for detailed leave management, more complex payroll components, medical records, etc.). Remember to add appropriate indexes on foreign keys and frequently queried columns for performance.